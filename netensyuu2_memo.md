## ipの割り振り規則
 * ネットワーク: 192.168.10.hoge/24
 * 実機にぶら下がる端末(管理用端末、ユーザ端末)のipは192.168.10.10〜
  * 物理サーバ(今回はVAIO)のipは192.168.10.10/24
    * 物理サーバのipとdockerコンテナをつなぐブリッジのipは192.168.10.100/24(これは必要ないかも)
  * 物理サーバ内で動くdockerコンテナのipは192.168.10.101〜
 * 実機のコンソール:

---

## macアドレス一覧
|マシン|NIC|macアドレス|備考|
|:-----------|:--|:------------:|:------------|
|三浦-VAIO|enp5s0|54:53:ed:1c:36:82|物理サーバ用(ipは192.168.10.10決め打ち)|
|木藤-Let's note||08:00:27:61::62:98||
|IMAGE test/apach コンテナ名:hoge|veth|72:14:3f:e2:cd:fa|変わるかも?|
---

## 物理マシンの起動手順
### Step.1 ubuntuのシェルで直接操作
1. `sudo brctl addbr br0`

2. `sudo ifconfig enp5s0 192.168.10.10/24`

3. `sudo brctl addif br0 enp5s0`

### Step.2 SSHでubuntuにログインして操作
0. `($ssh ensyuu2@192.168.10.10)`　パスワード:ensyuu2

1. `docker run -itd --name hogeとか コンテナ名`
or `docker start コンテナ名`

2. `sudo pipework br0 コンテナID コンテナに割り振るipアドレス(192.168.10.***/24)`　ただし、\*\*\*>=101
---

## コマンドリファレンス
### ネットワーク関係
* パケットをダンプ
 * `sudo tcpdump`: 普通にダンプ
 * `sudo tcpdump -i インターフェース`: インターフェースを指定してダンプ
  * 最後に`not host 172.16.0.1`とかつけると172.16.0.1(dockerのデフォルトブリッジdocker0)関係のパケットを除外
  * LLDPがうざい時は最後に`not ether proto 0x88cc`
  * フィルタの複数指定は`\( 条件1 \) and \( 条件2 \)`の様にかっこをエスケープして指定
* ブリッジ設定の確認
 * `brctl show`　:ブリッジを確認
 * `brctl showmacs <ブリッジ名>`　:ブリッジにつながってるmacアドレス

### docker関係
* dockerプロセスの確認
 * `docker ps` :現在動いてるプロセスのみ
 * `docker ps -a` :止まってるプロセスも含める
* 起動してるコンテナのプロセスに入る
 * ``
* appachの
